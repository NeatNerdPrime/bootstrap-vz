---
$schema: http://json-schema.org/draft-04/schema#
title: Puppet plugin manifest
type: object
properties:
  plugins:
    type: object
    properties:
      puppet:
        type: object
        properties:
          agent:
            type: object
            properties:
              major_version:
                anyOf: 
                - pattern: ^[5]$ 
          assets: {$ref: '#/definitions/absolute_path'}
          manifest: {$ref: '#/definitions/absolute_path'}
          install_modules:
            type: array
            items:
              type: array
              items:
                name: 
                  anyOf: 
                  - pattern: ^[^/]+(/[^/]+)?$ 
                version: 
                  type: number
              required: [name]               
              minItems: 1
        additionalProperties: false
definitions:
  absolute_path:
    pattern: ^/[^\0]+$
    type: string
